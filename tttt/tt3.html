<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    학번 : <input type="text" id="studentNo">
    이름 : <input type="text" id="name">
    학년 : <select id="grade">
        <option value="1">1학년</option>
        <option value="2">2학년</option>
        <option value="3">3학년</option>
        <option value="4">4학년</option>
    </select>
    전공 : <input type="text" id="major">
    <button id="btn" onclick="add()">추가</button>
    <br><br>
    <button id="show_btn" onclick="showall()">리스트</button>

    <select id="userGrade">
        <option value="1">1학년</option>
        <option value="2">2학년</option>
        <option value="3">3학년</option>
        <option value="4">4학년</option>
    </select>
    <p id="show"></p>

    <script>
        ary = [];
        function add() {
            studentNo = document.getElementById('studentNo').value;
            name = document.getElementById('name').value;
            grade = document.getElementById('grade').value;
            major = document.getElementById('major').value;
            ary.push({
                "studentNo": studentNo,
                "name": name,
                "grade": grade,
                "major": major
            })
            showall(-1);
        }

        function showall(m) {
            grade = parseInt(document.getElementById("userGrade").value)
        }

        var students = [];
        document.getElementById('btn').onclick = function () {
            var studentNo = document.getElementById('studentNo').value;//.addEventListener('click', function) {} 다른방법
            var name = document.getElementById('name').value;
            var grade = document.getElementById('grade').value;
            var major = document.getElementById('major').value;
            var student = {
                studentNo: studentNo,
                name: name,
                grade: grade,
                major: major
            }
            students.push(student);
            console.log(students);
        }
        document.getElementById('userGrade').onchange = function () {
            var grade = this.value;
            var filterStudents = students.filter(function (o) {
                return o.grade == grade;
            });
            var show = document.getElementById("show");
            var show_li = document.querySelectorAll("#show > li")
            show_li.forEach(function (o) {
                o.remove();
            });


            filterStudents.forEach(function (a) {
                // console.log(a);
                var $li = document.createElement('li');
                var $text = document.createTextNode(a.studentNo + " " + a.name);
                $li.appendChild($text);
                show.appendChild($li);
            });
            if (m == -1) {
                filterAry = ary;
            } else {
                filterAry = ary.filter(function (o, i) {
                    return o.grade = grade;
                })
            }
        }
    </script>
</body>

</html>